<?xml version="1.0"?>
<testCase version="8.6.1.202109290400" entryPoint="get_topology_resource_info">
    <general>
        <isProcedureLibrary>true</isProcedureLibrary>
        <language>Python</language>
    </general>
    <procedures>
        <item name="get_topology_resource_info" isPublic="true">
            <steps>
                <item guid="7a3ca24d-b197-4f94-8307-01add29e1965" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Configure parameter variables</body>
                    </command>
                    <nestedSteps>
                        <item guid="d1d3463f-2e8b-4895-823b-0e687b64165d" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>parameter_group_name = &quot;Topology_parameters&quot;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="114c7619-895d-4ade-8f00-1dd74a353bfa" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>emulated_ts_name = &quot;EmulatedSUT&quot;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="057561f9-2fe2-4dd8-99f5-b75502be7f73" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>remote_ts_name = &quot;RemoteNetworkHost&quot;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="dce415cc-2148-44cc-9d51-345b39679955" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>topology_emulated_sut = &quot;Emulated SUT&quot;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="85f92cff-a5e9-4487-8f7a-79c0c7b43473" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>topology_remote_networkhost = &quot;Remote Network Host&quot;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="bed988b8-0bb3-4413-bdfe-76e528dde5ba" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>topology_tas_name = &quot;TAS&quot;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="8c855d94-f03d-4634-a4b4-3eef4ad75d36" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>landslide_device_count = 0</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="1de63d32-9917-4c32-a869-745c1f378bd4" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>ts_names = []</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="1c482c8d-3eee-430d-918e-3b5554c6ff04" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Create Json response</body>
                    </command>
                    <nestedSteps>
                        <item guid="e134489a-bac9-4793-8de3-8b5c28af1b2f" action="json" useFieldsInCommand="false">
                            <command>
                                <body>action=&apos;createJson&apos;, documentName=&apos;response&apos;, fromFile=&apos;false&apos;, jsonString=&apos;{&quot;isB2B&quot;:false,&quot;devices&quot;:[],&quot;tas&quot;:{&quot;password&quot;:&quot;&quot;,&quot;Hostname&quot;:&quot;&quot;,&quot;ipAddress&quot;:&quot;&quot;,&quot;username&quot;:&quot;&quot;},&quot;suts&quot;:[],&quot;testservers&quot;:[]}&apos;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.execution.builtin.json.JsonPropertiesGroup">
                                <action inherit="false">createJson</action>
                                <jsonString inherit="false">{&quot;isB2B&quot;:false,&quot;devices&quot;:[],&quot;tas&quot;:{&quot;password&quot;:&quot;&quot;,&quot;Hostname&quot;:&quot;&quot;,&quot;ipAddress&quot;:&quot;&quot;,&quot;username&quot;:&quot;&quot;},&quot;suts&quot;:[],&quot;testservers&quot;:[]}</jsonString>
                                <documentName inherit="false">response</documentName>
                            </applicationProperties>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="0293863b-1fe1-4da8-8c84-92c0beb2c2c4" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Dump state</body>
                    </command>
                    <nestedSteps>
                        <item guid="0e7daa74-1236-4189-ac33-8322dc1bbf16" action="dumpState" useFieldsInCommand="false">
                            <postProcessing>
                                <storeResponseAt>dumpstate_data</storeResponseAt>
                                <storeResponseText>true</storeResponseText>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.execution.builtin.exec.DumpStateProperties"/>
                        </item>
                        <item guid="f48c7632-4487-4fe9-ae5d-37b148e5c970" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>start_index = dumpstate_data.find(&quot;&lt;data&quot;)</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="61aaddbf-87dc-4d01-bcae-aea7abb444ae" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>lword=len(&quot;&lt;/data&gt;&quot;)</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="85eeaddf-8aab-4286-a8ac-14b2b4deafa1" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>end_index = dumpstate_data.find(&quot;&lt;/data&gt;&quot;)</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="acb7f016-f22c-478f-aa2f-9ef12be272e0" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>parameter_data = dumpstate_data[start_index: end_index + lword].strip();print(parameter_data)</body>
                            </command>
                            <postProcessing isStoreResponseGlobal="true">
                                <storeResponseAt>parameter_data</storeResponseAt>
                                <storeResponseText>true</storeResponseText>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="b95bb984-50af-448a-81ba-328abaf078aa" action="dumpState" responseMap="project://my_project/response_maps/new_map.ffrm" useFieldsInCommand="false">
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query sub="true">count(data/parameters/[parameter_group_name]/TAS)</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="assert">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                <expression>int(value) == 1</expression>
                                                <actionsWhenTrue>
                                                    <item actionId="Eval">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                            <statement>tas_existed = True</statement>
                                                        </actionProperties>
                                                    </item>
                                                </actionsWhenTrue>
                                                <actionsWhenFalse>
                                                    <item actionId="Eval">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                            <statement>tas_existed = False</statement>
                                                        </actionProperties>
                                                    </item>
                                                    <item actionId="SkipRemainingRules">
                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    </item>
                                                </actionsWhenFalse>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query sub="true">count(data/parameters/[parameter_group_name]/Testservers/*)</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="assert">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                <expression>int(value) &gt; 0</expression>
                                                <actionsWhenTrue>
                                                    <item actionId="Eval">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                            <statement>ts_existed = True</statement>
                                                        </actionProperties>
                                                    </item>
                                                </actionsWhenTrue>
                                                <actionsWhenFalse>
                                                    <item actionId="Eval">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                            <statement>ts_existed = False</statement>
                                                        </actionProperties>
                                                    </item>
                                                    <item actionId="SkipRemainingRules">
                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    </item>
                                                </actionsWhenFalse>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query>count(data/parameters/Topology_parameters/Testservers/*)</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="store">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                <storageLocation>ts_count</storageLocation>
                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query>count(//resources/resource)</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="store">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                <storageLocation>resource_count</storageLocation>
                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                                <storeResponseAt>LandslideGroupParams</storeResponseAt>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.execution.builtin.exec.DumpStateProperties">
                                <appendThreads>false</appendThreads>
                                <appendSummary>false</appendSummary>
                            </applicationProperties>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="5b8de8b1-cbb5-43e3-a266-c724a4a6b2df" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Get parameter values of TAS</body>
                    </command>
                    <nestedSteps>
                        <item guid="163fd929-fe70-409e-8386-d9b192f2ed3e" action="if" useFieldsInCommand="false">
                            <command>
                                <body>tas_existed:</body>
                            </command>
                            <nestedSteps>
                                <item guid="40648734-73d5-4d73-af79-efcdff40f1ae" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>hostname = param(&apos;Topology_parameters/TAS/Hostname&apos;, &quot;&quot;)</body>
                                    </command>
                                    <eventHandlers>
                                        <item name="OnInterpreterError">
                                            <item actionId="DeclareExecutionIssue">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                    <message>Can not get TAS information. Please reserve a 5G Topology or input parameter file</message>
                                                </actionProperties>
                                            </item>
                                            <item actionId="FailTest">
                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            </item>
                                            <item actionId="ExitExecution">
                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            </item>
                                        </item>
                                    </eventHandlers>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="feba7c27-46cf-4a20-8ee2-9041f21a0264" action="if" useFieldsInCommand="false">
                                    <command>
                                        <body>not hostname:</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="1ba39885-f775-4216-b745-0b40aa9813b8" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>ipAddress = param(&apos;Topology_parameters/TAS/ipAddress&apos;, &quot;&quot;)</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="e3a37b77-9a38-4ced-a36d-3f9a0d35ba01" action="else" useFieldsInCommand="false">
                                    <nestedSteps>
                                        <item guid="a9b51ce0-70b5-494a-b4bb-862e0d597a2d" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>ipAddress = param(&apos;Topology_parameters/TAS/ipAddress&apos;, &quot;&quot;)</body>
                                            </command>
                                            <eventHandlers>
                                                <item name="OnInterpreterError">
                                                    <item actionId="Eval">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                            <statement>ipAddress = &quot;&quot;</statement>
                                                        </actionProperties>
                                                    </item>
                                                </item>
                                            </eventHandlers>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="c6f6344c-c224-4309-bc5a-4fa218a9542d" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>tas_username = param(&apos;Topology_parameters/TAS/Username&apos;, &quot;&quot;)</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="44833fe9-687e-4ef8-b273-0fe9a94496b2" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>tas_password = param(&apos;Topology_parameters/TAS/Password&apos;, &quot;&quot;)</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="d1112bf7-f753-4240-b0e8-560464cf1a47" action="json" useFieldsInCommand="false">
                                    <command>
                                        <body>action=&apos;setJsonValue&apos;, editResponseStructure=&apos;false&apos;, documentName=&apos;response&apos;, pathValue=&apos;{&quot;tas/username&quot;:&quot;[tas_username]&quot;,&quot;tas/ipAddress&quot;:&quot;[ipAddress]&quot;,&quot;tas/password&quot;:&quot;[tas_password]&quot;,&quot;tas/Hostname&quot;:&quot;[hostname]&quot;}&apos;</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.execution.builtin.json.JsonPropertiesGroup">
                                        <action inherit="false">setJsonValue</action>
                                        <pathValue inherit="false" sub="true">{&quot;tas/username&quot;:&quot;[tas_username]&quot;,&quot;tas/ipAddress&quot;:&quot;[ipAddress]&quot;,&quot;tas/password&quot;:&quot;[tas_password]&quot;,&quot;tas/Hostname&quot;:&quot;[hostname]&quot;}</pathValue>
                                        <documentName inherit="false">response</documentName>
                                    </applicationProperties>
                                </item>
                                <item guid="dc2ba5e4-755d-429c-a96b-029bc3cd5a68" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>landslide_device_count += 1</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="4c64339e-179c-492e-8763-023350ae844c" action="else" useFieldsInCommand="false">
                            <nestedSteps>
                                <item guid="4b3b417a-b28f-4855-9aad-3af7275413dd" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>reason = &quot;The TAS resource does not exist&quot;</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="1e8f03c6-acd6-4ffe-9037-0fc1781b1e6e" action="json" useFieldsInCommand="false">
                                    <command>
                                        <body>action=&apos;createJson&apos;, documentName=&apos;response&apos;, fromFile=&apos;false&apos;, jsonString=&apos;{&quot;reason&quot;:&quot;[reason]&quot;}&apos;</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.execution.builtin.json.JsonPropertiesGroup">
                                        <action inherit="false">createJson</action>
                                        <jsonString inherit="false" sub="true">{&quot;reason&quot;:&quot;[reason]&quot;}</jsonString>
                                        <documentName inherit="false">response</documentName>
                                    </applicationProperties>
                                </item>
                                <item guid="553d46b5-0b56-497d-9b7d-788e2ccce29e" action="return">
                                    <command>
                                        <body>[response]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="91775227-4d1f-4afe-a3e8-eb1dbeefc25b" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Get parameter values of Test Servers</body>
                    </command>
                    <nestedSteps>
                        <item guid="01503b24-4fe4-4062-b746-6a92a921a857" action="if" useFieldsInCommand="false">
                            <command>
                                <body>ts_existed:</body>
                            </command>
                            <nestedSteps>
                                <item guid="7a1a886d-0442-4bd5-b05b-1ef8d4c25cf7" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>ts_index = 0</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="a366a042-561b-4f41-bec6-5d91a851863d" action="for" useFieldsInCommand="false">
                                    <command>
                                        <body>i in range (1, int(ts_count) + 1):</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="6cc02988-2f32-45e3-87c4-7bcafecdeb08" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>ts_name = query(&quot;LandslideGroupParams&quot;, &quot;name(data/parameters/&quot; + parameter_group_name + &quot;/Testservers/*[&quot; +str(i)+ &quot;])&quot;);print(ts_name)</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="fbf0b120-9f3d-4ba7-a478-258aec8e3ce2" action="json" useFieldsInCommand="false">
                                            <command>
                                                <body>action=&apos;createJson&apos;, documentName=&apos;ts_info&apos;, fromFile=&apos;false&apos;, jsonString=&apos;{&quot;Status&quot;:&quot;need_update&quot;,&quot;Landslide TAS&quot;:&quot;&quot;,&quot;is_reserve&quot;:false,&quot;Model&quot;:&quot;&quot;,&quot;topo_device_name&quot;:&quot;&quot;,&quot;TS Name&quot;:&quot;&quot;,&quot;Make&quot;:&quot;&quot;,&quot;topo_id&quot;:&quot;&quot;,&quot;ports&quot;:[],&quot;Port Number&quot;:&quot;0&quot;, &quot;TS_ID&quot;:&quot;&quot;, &quot;ts_param_name&quot;:&quot;&quot;}&apos;</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.execution.builtin.json.JsonPropertiesGroup">
                                                <action inherit="false">createJson</action>
                                                <jsonString inherit="false">{&quot;Status&quot;:&quot;need_update&quot;,&quot;Landslide TAS&quot;:&quot;&quot;,&quot;is_reserve&quot;:false,&quot;Model&quot;:&quot;&quot;,&quot;topo_device_name&quot;:&quot;&quot;,&quot;TS Name&quot;:&quot;&quot;,&quot;Make&quot;:&quot;&quot;,&quot;topo_id&quot;:&quot;&quot;,&quot;ports&quot;:[],&quot;Port Number&quot;:&quot;0&quot;, &quot;TS_ID&quot;:&quot;&quot;, &quot;ts_param_name&quot;:&quot;&quot;}</jsonString>
                                                <documentName inherit="false">ts_info</documentName>
                                            </applicationProperties>
                                        </item>
                                        <item guid="3334b103-9d2f-4184-a91a-3e03459a66f6" action="if" useFieldsInCommand="false">
                                            <command>
                                                <body>ts_name:</body>
                                            </command>
                                            <nestedSteps>
                                                <item guid="246678dc-6312-4120-82ab-5550cd574475" action="json" useFieldsInCommand="false">
                                                    <command>
                                                        <body>action=&apos;setJsonValue&apos;, editResponseStructure=&apos;false&apos;, documentName=&apos;ts_info&apos;, pathValue=&apos;{&quot;ts_param_name&quot;:&quot;[ts_name]&quot;}&apos;</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.execution.builtin.json.JsonPropertiesGroup">
                                                        <action inherit="false">setJsonValue</action>
                                                        <pathValue inherit="false" sub="true">{&quot;ts_param_name&quot;:&quot;[ts_name]&quot;}</pathValue>
                                                        <documentName inherit="false">ts_info</documentName>
                                                    </applicationProperties>
                                                </item>
                                                <item guid="42b1d612-f735-4df6-aeab-8b44b1a712cd" action="comment" useFieldsInCommand="false">
                                                    <command>
                                                        <body>Get Landslide TS Name</body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="7ffe69ff-f32b-448b-a21f-7af7545cd386" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>query_path = &apos;Topology_parameters/Testservers/{0}/TSName&apos;.format(ts_name)</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="98fc75f8-9148-4e1b-b126-c6f2fbbe9d65" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>ls_ts_name = param(query_path, &quot;&quot;)</body>
                                                            </command>
                                                            <eventHandlers>
                                                                <item name="OnInterpreterError">
                                                                    <item actionId="Eval">
                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                                            <statement>ls_ts_name = &quot;&quot;</statement>
                                                                        </actionProperties>
                                                                    </item>
                                                                </item>
                                                            </eventHandlers>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="7a5ddd1c-80ee-4aef-941f-bd91ee8a011f" action="if" useFieldsInCommand="false">
                                                            <command>
                                                                <body>not ls_ts_name:</body>
                                                            </command>
                                                            <nestedSteps>
                                                                <item guid="c15a1b2c-a5b4-47c8-ac43-5e63086336a4" action="continue" useFieldsInCommand="false">
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="c4add7c5-d417-4d3d-a262-f4cd51a0214a" action="if" useFieldsInCommand="false">
                                                    <command>
                                                        <body>ts_name == emulated_ts_name:</body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="20b0cf80-0be8-4687-9c82-fcf5cd29b480" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>topo_device_name = &quot;Emulated SUT&quot;</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="961c557e-e975-456a-bc04-a80928faea71" action="json" useFieldsInCommand="false">
                                                            <command>
                                                                <body>action=&apos;setJsonValue&apos;, editResponseStructure=&apos;false&apos;, documentName=&apos;response&apos;, pathValue=&apos;{&quot;isB2B&quot;:true}&apos;</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.execution.builtin.json.JsonPropertiesGroup">
                                                                <action inherit="false">setJsonValue</action>
                                                                <pathValue inherit="false">{&quot;isB2B&quot;:true}</pathValue>
                                                                <documentName inherit="false">response</documentName>
                                                            </applicationProperties>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="e50fc8e4-3e66-4b97-9ef4-1c674ca01280" action="elif" useFieldsInCommand="false">
                                                    <command>
                                                        <body>ts_name.startswith(&quot;TS&quot;):</body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="49af6933-763c-43a1-91ba-e6b3a1bda725" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>ts_number = ts_name[2:].strip()</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="f0f2553a-d7f6-4c27-810d-f7007f5e0461" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>topo_device_name = &apos;TS {0}&apos;.format(ts_number)</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="296785e5-fdd4-48cd-84ea-cce942bf6aab" action="elif" useFieldsInCommand="false">
                                                    <command>
                                                        <body>ts_name == remote_ts_name:</body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="eae50fbb-ff20-43bf-993a-e94155393d1b" action="if" useFieldsInCommand="false">
                                                            <command>
                                                                <body>param(&apos;TC_parameters/Enable_RemoteNetworkHost&apos;, False):</body>
                                                            </command>
                                                            <nestedSteps>
                                                                <item guid="c5085f37-1d21-4858-b0c5-9a6dee3c58c3" action="eval" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>topo_device_name = topology_remote_networkhost</body>
                                                                    </command>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="8eadfd60-919c-4451-af62-43a5e0612fce" action="else" useFieldsInCommand="false">
                                                            <nestedSteps>
                                                                <item guid="d00637bb-fb30-4c8a-99c4-e00495d5c606" action="continue" useFieldsInCommand="false">
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="4f36934e-7ead-4cec-bdbf-7b0235353091" action="comment" useFieldsInCommand="false">
                                                    <command>
                                                        <body>Get TS Make</body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="53648f97-3740-4eaf-b730-f240d12de4fc" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>query_path = &apos;Topology_parameters/Testservers/{0}/Make&apos;.format(ts_name)</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="02bbf5dd-438e-4b8f-a117-c16ce8334fd4" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>ls_make = param(query_path, &apos;&apos;)</body>
                                                            </command>
                                                            <eventHandlers>
                                                                <item name="OnInterpreterError">
                                                                    <item actionId="Eval">
                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                                            <statement>ls_make = &quot;&quot;</statement>
                                                                        </actionProperties>
                                                                    </item>
                                                                </item>
                                                            </eventHandlers>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="22ee6f09-8c25-40fb-9389-5b325fd7fc19" action="comment" useFieldsInCommand="false">
                                                    <command>
                                                        <body>Get TS Model</body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="5be077ce-072b-4cb7-939d-058d0f01e11a" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>query_path = &apos;Topology_parameters/Testservers/{0}/Model&apos;.format(ts_name)</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="d6b6d5b8-2a5b-440d-b586-f4fb030bf63e" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>ls_model = param(query_path, &apos;&apos;)</body>
                                                            </command>
                                                            <eventHandlers>
                                                                <item name="OnInterpreterError">
                                                                    <item actionId="Eval">
                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                                            <statement>ls_model = &quot;&quot;</statement>
                                                                        </actionProperties>
                                                                    </item>
                                                                </item>
                                                            </eventHandlers>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="ea85e48b-8b46-4728-9df2-03470fe4548d" action="json" useFieldsInCommand="false">
                                                    <command>
                                                        <body>action=&apos;setJsonValue&apos;, editResponseStructure=&apos;false&apos;, documentName=&apos;ts_info&apos;, pathValue=&apos;{&quot;Model&quot;:&quot;[ls_model]&quot;,&quot;topo_device_name&quot;:&quot;[topo_device_name]&quot;,&quot;TS Name&quot;:&quot;[ls_ts_name]&quot;,&quot;Make&quot;:&quot;[ls_make]&quot;}&apos;</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.execution.builtin.json.JsonPropertiesGroup">
                                                        <action inherit="false">setJsonValue</action>
                                                        <pathValue inherit="false" sub="true">{&quot;Model&quot;:&quot;[ls_model]&quot;,&quot;topo_device_name&quot;:&quot;[topo_device_name]&quot;,&quot;TS Name&quot;:&quot;[ls_ts_name]&quot;,&quot;Make&quot;:&quot;[ls_make]&quot;}</pathValue>
                                                        <documentName inherit="false">ts_info</documentName>
                                                    </applicationProperties>
                                                </item>
                                                <item guid="51901c2b-051d-4e8a-9e58-9a40ff745137" action="comment" useFieldsInCommand="false">
                                                    <command>
                                                        <body>Add ports</body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="97fc9c00-f04e-490f-af1a-88987ddbea26" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>query_path = &apos;count(data/parameters/{0}/Testservers/{1}/Ports/*)&apos;.format(parameter_group_name, ts_name)</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="41adea98-0237-4c05-8202-a105217ecd92" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>port_count = query(&apos;LandslideGroupParams&apos;,query_path);print(port_count)</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="764c6937-b54a-4e8c-879a-c0f3edf7dac1" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>port_index = 0</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="8d332462-dc21-45f5-83f7-89d71269fe57" action="json" useFieldsInCommand="false">
                                                            <command>
                                                                <body>action=&apos;createJson&apos;, documentName=&apos;port_info&apos;, fromFile=&apos;false&apos;, jsonString=&apos;{&quot;name&quot;:&quot;&quot;, &quot;node_names&quot;:&quot;&quot;}&apos;</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.execution.builtin.json.JsonPropertiesGroup">
                                                                <action inherit="false">createJson</action>
                                                                <jsonString inherit="false">{&quot;name&quot;:&quot;&quot;, &quot;node_names&quot;:&quot;&quot;}</jsonString>
                                                                <documentName inherit="false">port_info</documentName>
                                                            </applicationProperties>
                                                        </item>
                                                        <item guid="262c43bc-8286-4e5b-bd27-13bd51afe01d" action="for" useFieldsInCommand="false">
                                                            <command>
                                                                <body>port_i in range(1, int(port_count) + 1):</body>
                                                            </command>
                                                            <nestedSteps>
                                                                <item guid="344dd755-e5b3-4f47-9070-bcfbe47d9179" action="eval" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>has_phy_name = False</body>
                                                                    </command>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                                <item guid="84d18fb4-35f3-4672-bf16-6153be8780e0" action="eval" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>is_enough_v4 = 0</body>
                                                                    </command>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                                <item guid="242a8e58-9349-4103-ba95-f49f61851bfa" action="eval" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>is_enough_v6 = 0</body>
                                                                    </command>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                                <item guid="e8845060-cb22-46a2-9f24-9f8299e343b5" action="eval" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>query_path = &apos;name(data/parameters/{0}/Testservers/{1}/Ports/*[{2}])&apos;.format(parameter_group_name, ts_name, port_i)</body>
                                                                    </command>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                                <item guid="7a103fd0-45d5-4ff7-b3a9-d5a66b2b0f7e" action="eval" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>port_name = query(&apos;LandslideGroupParams&apos;,query_path);print(port_name)</body>
                                                                    </command>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                                <item guid="4e03d81a-2c8b-4c27-a478-4c1841f23458" action="eval" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>query_path = &apos;count(data/parameters/{0}/Testservers/{1}/Ports/{2}/*)&apos;.format(parameter_group_name, ts_name, port_name)</body>
                                                                    </command>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                                <item guid="3007724b-2611-4102-a426-0031be58b96d" action="eval" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>port_property_count = query(&apos;LandslideGroupParams&apos;,query_path);print(port_property_count)</body>
                                                                    </command>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                                <item guid="f7e4b291-99cd-49cc-8c01-a26b164c5293" action="for" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>port_property_i in range(1, int(port_property_count) + 1):</body>
                                                                    </command>
                                                                    <nestedSteps>
                                                                        <item guid="22e05c69-d3a8-4b88-809c-50f2f54d3d0c" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>query_path = &apos;name(data/parameters/{0}/Testservers/{1}/Ports/{2}/*[{3}])&apos;.format(parameter_group_name, ts_name, port_name, port_property_i)</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="597f67bc-5d1f-4ca6-8eb2-724cd9f3de05" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>port_property_name = query(&apos;LandslideGroupParams&apos;,query_path);print(port_property_name)</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="7408a50a-fdaa-4992-bf56-646bb8bde54b" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>query_path = &apos;Topology_parameters/Testservers/{0}/Ports/{1}/{2}&apos;.format(ts_name, port_name, port_property_name)</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="a876b87c-b4b8-4343-99f8-b14bf4a79870" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>port_property_value = param(query_path, &quot;&quot;)</body>
                                                                            </command>
                                                                            <eventHandlers>
                                                                                <item name="OnInterpreterError">
                                                                                    <item actionId="Eval">
                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                                                            <statement>port_exists = False</statement>
                                                                                        </actionProperties>
                                                                                    </item>
                                                                                    <item actionId="Break">
                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                    </item>
                                                                                </item>
                                                                            </eventHandlers>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="5e77a3a4-4ece-413d-9a91-8b61208dc351" action="if" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>port_property_value:</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="ff775d73-fea2-4172-a093-5eb04c04e827" action="if" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>&apos;4&apos; in port_property_name:</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="54baf321-a879-4d13-a68f-834a414bf291" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>is_enough_v4 += 1</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="7ef198ee-50ad-423d-94b3-70257793f257" action="elif" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>&apos;6&apos; in port_property_name:</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="cea8e145-afb4-46bf-a275-88f68b91d11b" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>is_enough_v6 += 1</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="3feeb32c-75a1-466f-8025-fd0e376a6cba" action="else" useFieldsInCommand="false">
                                                                                    <nestedSteps>
                                                                                        <item guid="84c84f9d-ba85-402a-a2b7-913ed56df508" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>has_phy_name = True</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="75c81ca0-04ca-4085-8d68-71c671ac8616" action="json" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>action=&apos;addJsonNode&apos;, editResponseStructure=&apos;false&apos;, documentName=&apos;port_info&apos;, pathValue=&apos;{&quot;/&quot;:{&quot;[port_property_name]&quot;:&quot;[port_property_value]&quot;}}&apos;</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.execution.builtin.json.JsonPropertiesGroup">
                                                                                <action inherit="false">addJsonNode</action>
                                                                                <pathValue inherit="false" sub="true">{&quot;/&quot;:{&quot;[port_property_name]&quot;:&quot;[port_property_value]&quot;}}</pathValue>
                                                                                <documentName inherit="false">port_info</documentName>
                                                                            </applicationProperties>
                                                                        </item>
                                                                    </nestedSteps>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                                <item guid="7828a59c-5848-413c-9f87-f9af925fe919" action="if" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>has_phy_name and (is_enough_v4 == 3 or is_enough_v6 == 3):</body>
                                                                    </command>
                                                                    <nestedSteps>
                                                                        <item guid="54e4e3cc-25b2-4907-bf79-84f5d988f90e" action="json" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>action=&apos;setJsonValue&apos;, editResponseStructure=&apos;false&apos;, documentName=&apos;port_info&apos;, pathValue=&apos;{&quot;name&quot;:&quot;[port_name]&quot;}&apos;</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.execution.builtin.json.JsonPropertiesGroup">
                                                                                <action inherit="false">setJsonValue</action>
                                                                                <pathValue inherit="false" sub="true">{&quot;name&quot;:&quot;[port_name]&quot;}</pathValue>
                                                                                <documentName inherit="false">port_info</documentName>
                                                                            </applicationProperties>
                                                                        </item>
                                                                        <item guid="0fc4c07a-8404-4920-b4c7-82dd14e19d4c" action="json" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>action=&apos;addJsonNode&apos;, editResponseStructure=&apos;false&apos;, documentName=&apos;ts_info&apos;, pathValue=&apos;{&quot;ports/\\\\[[port_index]]&quot;:[port_info]}&apos;</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.execution.builtin.json.JsonPropertiesGroup">
                                                                                <action inherit="false">addJsonNode</action>
                                                                                <pathValue inherit="false" sub="true">{&quot;ports/\\[[port_index]]&quot;:[port_info]}</pathValue>
                                                                                <documentName inherit="false">ts_info</documentName>
                                                                            </applicationProperties>
                                                                        </item>
                                                                        <item guid="92fd3022-5f63-4f34-9c25-5d74a92b318b" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>port_index += 1</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                    </nestedSteps>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                                <item guid="c6f4ac29-9ec5-4dbe-a979-f2c44a3beb1f" action="else" useFieldsInCommand="false">
                                                                    <nestedSteps>
                                                                        <item guid="64b60890-6990-4738-b565-4067b6cd02d1" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>message = &apos;Parameter &quot;{1}/{0}&quot; does not have enough information &apos;.format(port_name, ts_name)</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="b603592b-d751-4bb9-a873-e130d5f36076" action="message" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>Error:[message]</body>
                                                                            </command>
                                                                            <postProcessing>
                                                                                <analysisRules>
                                                                                    <item>
                                                                                        <extractorInfo extractorType="none">
                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                        </extractorInfo>
                                                                                        <processorInfo ruleType="assert">
                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                <expression>False</expression>
                                                                                                <actionsWhenFalse>
                                                                                                    <item actionId="FailTest">
                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                    </item>
                                                                                                </actionsWhenFalse>
                                                                                            </ruleProperties>
                                                                                        </processorInfo>
                                                                                    </item>
                                                                                </analysisRules>
                                                                            </postProcessing>
                                                                            <applicationProperties type="com.fnfr.svt.execution.builtin.exec.MessagePropertyGroup">
                                                                                <severity inherit="false">Error</severity>
                                                                                <message inherit="false">[message]</message>
                                                                            </applicationProperties>
                                                                        </item>
                                                                        <item guid="70fde5da-e586-4fc3-b2fa-abbd40ec0fca" action="exit" useFieldsInCommand="false">
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                    </nestedSteps>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="b5390a48-ee18-4fc1-b357-c8fb372fd7f9" action="eval" useFieldsInCommand="false">
                                                    <command>
                                                        <body>print(ts_info)</body>
                                                    </command>
                                                    <postProcessing>
                                                        <analysisRules>
                                                            <item>
                                                                <extractorInfo extractorType="query">
                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                        <query>count(mapped/Json/ports/item)</query>
                                                                    </extractorProperties>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="store">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                        <storageLocation>port_number</storageLocation>
                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                        </analysisRules>
                                                    </postProcessing>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="7fd1cb1c-3d86-42ea-9402-c08bbaaadb81" action="json" useFieldsInCommand="false">
                                                    <command>
                                                        <body>action=&apos;setJsonValue&apos;, editResponseStructure=&apos;false&apos;, documentName=&apos;ts_info&apos;, pathValue=&apos;{&quot;Port Number&quot;:[port_number]}&apos;</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.execution.builtin.json.JsonPropertiesGroup">
                                                        <action inherit="false">setJsonValue</action>
                                                        <pathValue inherit="false" sub="true">{&quot;Port Number&quot;:[port_number]}</pathValue>
                                                        <documentName inherit="false">ts_info</documentName>
                                                    </applicationProperties>
                                                </item>
                                                <item guid="3bdb848d-c0a6-4e23-a573-f4b7dcb51ae0" action="json" useFieldsInCommand="false">
                                                    <command>
                                                        <body>action=&apos;addJsonNode&apos;, editResponseStructure=&apos;false&apos;, documentName=&apos;response&apos;, pathValue=&apos;{&quot;testservers/\\\\[[ts_index]]&quot;:[ts_info]}&apos;</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.execution.builtin.json.JsonPropertiesGroup">
                                                        <action inherit="false">addJsonNode</action>
                                                        <pathValue inherit="false" sub="true">{&quot;testservers/\\[[ts_index]]&quot;:[ts_info]}</pathValue>
                                                        <documentName inherit="false">response</documentName>
                                                    </applicationProperties>
                                                </item>
                                                <item guid="4757c033-c0f2-44aa-b963-387169b74504" action="eval" useFieldsInCommand="false">
                                                    <command>
                                                        <body>ts_index += 1</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="bc321a7c-9257-4ad3-b24b-92bc623f89be" action="eval" useFieldsInCommand="false">
                                                    <command>
                                                        <body>landslide_device_count += 1</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="5fbe6508-eb23-4c45-9205-1302a6f332c6" action="else" useFieldsInCommand="false">
                            <nestedSteps>
                                <item guid="c019039a-c542-45d2-a79f-39c6ba59cb34" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>reason = &quot;The TS resource does not exist&quot;</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="7a85bf83-c82e-4acb-b5e5-e661f7a2fd25" action="json" useFieldsInCommand="false">
                                    <command>
                                        <body>action=&apos;createJson&apos;, documentName=&apos;response&apos;, fromFile=&apos;false&apos;, jsonString=&apos;{&quot;reason&quot;:&quot;[reason]&quot;}&apos;</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.execution.builtin.json.JsonPropertiesGroup">
                                        <action inherit="false">createJson</action>
                                        <jsonString inherit="false" sub="true">{&quot;reason&quot;:&quot;[reason]&quot;}</jsonString>
                                        <documentName inherit="false">response</documentName>
                                    </applicationProperties>
                                </item>
                                <item guid="69931be6-5f9d-42e4-b84c-6f4ab030c79d" action="return">
                                    <command>
                                        <body>[response]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="562aaa72-538f-4f1b-9523-1637ce6508a4" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Get another resource from Topology</body>
                    </command>
                    <nestedSteps>
                        <item guid="fbde4478-ae4c-4195-b4eb-b31f69f33632" action="if" useFieldsInCommand="false">
                            <command>
                                <body>landslide_device_count &lt; int(resource_count):</body>
                            </command>
                            <nestedSteps>
                                <item guid="851b7258-f7f8-4cdf-94fa-5142cb22222f" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>query_path = &apos;//resources/resource[property[@name = &quot;name&quot;][@value != &quot;{0}&quot; and @value != &quot;{1}&quot; and not(starts-with(@value, &quot;TS&quot;))]]&apos;.format(topology_tas_name, topology_emulated_sut)</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="8f188dff-3a1e-43d2-b22e-a159c3883344" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>query_count = &apos;count({0})&apos;.format(query_path)</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="16345c87-5d3b-47f0-928a-e6de4ba38bc3" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>sut_count = tbml(&apos;query&apos;, query_count)</body>
                                    </command>
                                    <postProcessing>
                                        <analysisRules>
                                            <item>
                                                <extractorInfo extractorType="query">
                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                        <query>responseLine()</query>
                                                    </extractorProperties>
                                                </extractorInfo>
                                                <processorInfo ruleType="store">
                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                        <storageLocation>count</storageLocation>
                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                    </ruleProperties>
                                                </processorInfo>
                                            </item>
                                        </analysisRules>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="6ec7544f-5a3e-4b6d-b42e-633d432fb4e6" action="for" useFieldsInCommand="false">
                                    <command>
                                        <body>i in range(1, int(sut_count) + 1):</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="7ef37d69-e546-4e1c-9f3c-83173fdaaf16" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>query_name = &apos;{0}[{1}]/property[@name = &quot;name&quot;]/@value&apos;.format(query_path, str(i))</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="2ec18708-ba16-433a-890e-22dff6808cb3" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>sut_name = tbml(&apos;query&apos;, query_name)</body>
                                            </command>
                                            <postProcessing>
                                                <analysisRules>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                <query>responseLine()</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>topo_ts_name</storageLocation>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                </analysisRules>
                                            </postProcessing>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="ab660f7d-5de2-4b90-8449-163f02bb6cb7" action="if" useFieldsInCommand="false">
                                            <command>
                                                <body>sut_name:</body>
                                            </command>
                                            <nestedSteps>
                                                <item guid="709e191d-9f20-4cc7-bdaa-0103dacd51bf" action="json" useFieldsInCommand="false">
                                                    <command>
                                                        <body>action=&apos;createJson&apos;, documentName=&apos;sut_info&apos;, fromFile=&apos;false&apos;, jsonString=&apos;{&quot;sutName&quot;:&quot;[sut_name]&quot;}&apos;</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.execution.builtin.json.JsonPropertiesGroup">
                                                        <action inherit="false">createJson</action>
                                                        <jsonString inherit="false" sub="true">{&quot;sutName&quot;:&quot;[sut_name]&quot;}</jsonString>
                                                        <documentName inherit="false">sut_info</documentName>
                                                    </applicationProperties>
                                                </item>
                                                <item guid="cc8d58b1-d430-4f52-a3d7-b9c3abad1a0f" action="comment" useFieldsInCommand="false">
                                                    <command>
                                                        <body>Query SUT property</body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="a9a9cc88-a0d9-4ba6-8ebe-11e86a26a5ed" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>query_collection = &apos;count({0}[{1}]/propertyCollection)&apos;.format(query_path, i)</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="a6e9d0d6-8adb-45f7-bdb4-a49d2ada9b68" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>collection_count = tbml(&apos;query&apos;, query_collection)</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="2aebc6c1-0e57-42e8-a0de-0fd52c02be49" action="for" useFieldsInCommand="false">
                                                            <command>
                                                                <body>collection_i in range(1, int(collection_count) + 1):</body>
                                                            </command>
                                                            <nestedSteps>
                                                                <item guid="485a29b0-40a1-4a40-bb14-9f25a0b33803" action="eval" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>query_property = &apos;count({0}[{1}]/propertyCollection[{2}]/property)&apos;.format(query_path, i, collection_i)</body>
                                                                    </command>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                                <item guid="be0f2f15-0512-4607-9e98-a0d94f4087e5" action="eval" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>property_count = tbml(&apos;query&apos;, query_property)</body>
                                                                    </command>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                                <item guid="49dce770-e876-4093-8d36-ccff8810e0c0" action="for" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>property_i in range(1, int(property_count) + 1):</body>
                                                                    </command>
                                                                    <nestedSteps>
                                                                        <item guid="0f59b3c3-114f-4f70-ab97-d12df3e31a38" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>query_property_name = &apos;{0}[{1}]/propertyCollection[{2}]/property[{3}]/@name&apos;.format(query_path, i, collection_i, property_i)</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="8d613752-5df9-45e5-b35c-425069e2f924" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>property_name = tbml(&apos;query&apos;, query_property_name)</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="d66c810e-4ce8-4430-a94c-1d20d1307b95" action="if" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>property_name:</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="3f8748fb-a37a-449c-b6e2-ea6819cdf2d1" action="eval" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>query_property_value = &apos;{0}[{1}]/propertyCollection[{2}]/property[{3}]/@value&apos;.format(query_path, i, collection_i, property_i)</body>
                                                                                    </command>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="8458a471-3cfb-48e5-a44e-3f7aacf285ab" action="eval" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>property_value = tbml(&apos;query&apos;, query_property_value)</body>
                                                                                    </command>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="60594a19-421d-4e43-9b35-e0b2c2b125d0" action="json" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>action=&apos;addJsonNode&apos;, editResponseStructure=&apos;false&apos;, documentName=&apos;sut_info&apos;, pathValue=&apos;{&quot;/&quot;:{&quot;[property_name]&quot;:&quot;[property_value]&quot;}}&apos;</body>
                                                                                    </command>
                                                                                    <applicationProperties type="com.fnfr.svt.execution.builtin.json.JsonPropertiesGroup">
                                                                                        <action inherit="false">addJsonNode</action>
                                                                                        <pathValue inherit="false" sub="true">{&quot;/&quot;:{&quot;[property_name]&quot;:&quot;[property_value]&quot;}}</pathValue>
                                                                                        <documentName inherit="false">sut_info</documentName>
                                                                                    </applicationProperties>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                    </nestedSteps>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="910cadd3-d5f2-469f-9e9a-32f81409d469" action="json" useFieldsInCommand="false">
                                                    <command>
                                                        <body>action=&apos;addJsonNode&apos;, editResponseStructure=&apos;false&apos;, documentName=&apos;response&apos;, pathValue=&apos;{&quot;suts/\\\\[0]&quot;:[sut_info]}&apos;</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.execution.builtin.json.JsonPropertiesGroup">
                                                        <action inherit="false">addJsonNode</action>
                                                        <pathValue inherit="false" sub="true">{&quot;suts/\\[0]&quot;:[sut_info]}</pathValue>
                                                        <documentName inherit="false">response</documentName>
                                                    </applicationProperties>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="8d762802-5641-4814-9bde-954284ade002" action="return">
                    <command>
                        <body>[response]</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <response>{}</response>
        </item>
    </procedures>
</testCase>
